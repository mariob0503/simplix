<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Lift&Learn Gesture Testing</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    /* Global styling */
    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      background-color: black;
      font-family: Arial, sans-serif;
      overflow: hidden;
    }
    /* Flag styling at the top */
    #flag {
      position: absolute;
      top: 0;
      width: 100%;
      text-align: center;
      padding: 10px 0;
      /* Reduced font sizes: 65% of previous values */
      font-size: 1.43rem; /* Previously 2.2rem */
      color: white; /* Default text white */
      line-height: 1.3;
      z-index: 1;
      pointer-events: none;
    }
    /* Special inline classes for blue words */
    .blue { color: blue; }
    .blue-bold { color: blue; font-weight: bold; }
    /* Big and bold styling for Lift&Learn (reduced by 35%) */
    .big-bold {
      font-size: 2.86rem; /* Previously 4.4rem */
      font-weight: bold;
    }
    /* Container for messages and buttons (fixed at the bottom) */
    .container {
      position: absolute;
      bottom: 0;
      left: 50%;
      transform: translateX(-50%);
      width: 100%;
      height: 120px; /* fixed height so buttons remain in the same spot */
      text-align: center;
      z-index: 10;
    }
    /* Fixed message area above the buttons */
    #message {
      position: absolute;
      top: 0;
      width: 100%;
      font-size: 1.3rem;
      color: white;
      margin: 0;
    }
    /* Buttons container: fixed at the bottom of the overall container */
    .buttons {
      position: absolute;
      bottom: 20px;
      width: 100%;
    }
    button {
      padding: 10px 20px;
      margin: 5px;
      font-size: 1.1rem;
      background-color: blue;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }
    button:active {
      transform: scale(0.98);
    }
    /* Bubble (balloon) styles for success feedback */
    .bubble {
      position: absolute;
      background: rgba(135, 206, 250, 0.7);
      border-radius: 50%;
      opacity: 0;
      animation: rise 2s ease-out forwards;
    }
    @keyframes rise {
      0% {
        transform: translateY(0) scale(0.5);
        opacity: 1;
      }
      100% {
        transform: translateY(-150px) scale(1);
        opacity: 0;
      }
    }
    /* Arrow styling and animation for the swipe prompt */
    #arrow {
      position: absolute;
      bottom: 140px; /* slightly above the fixed container */
      left: 50%;
      transform: translateX(-50%);
      font-size: 3rem;
      opacity: 0;
      display: none;
      z-index: 5;
    }
    .animate-arrow {
      animation: swipeArrow 1.5s ease-out forwards;
    }
    @keyframes swipeArrow {
      0% {
        bottom: 140px;
        opacity: 1;
      }
      100% {
        bottom: 90%;
        opacity: 0;
      }
    }
  </style>
</head>
<body>
  <!-- Fancy Flag at the top -->
  <div id="flag">
    <div>Welcome to</div>
    <div class="big-bold">
      <span class="blue">Lift</span>&Learn
    </div>
    <div>your <strong><span class="blue">Simplix</span> Gym Reward System</strong></div>
    <div>collect your <strong><span class="blue-bold">Power</span>Points</strong></div>
    <div>and get great discounts on Supplements</div>
  </div>

  <!-- Container for messages and buttons fixed at the bottom -->
  <div class="container">
    <div id="message"></div>
    <div class="buttons">
      <button id="shakeButton">Test Shake</button>
      <button id="tiltButton">Test Tilt</button>
      <button id="swipeButton">Test Swipe</button>
      <button id="resetButton">Reset</button>
    </div>
  </div>

  <!-- Arrow element for swipe test prompt -->
  <div id="arrow">⬆️</div>

  <script>
    const messageDiv = document.getElementById('message');
    const arrowDiv = document.getElementById('arrow');

    /* =========================
       1. Shake Test
       ========================= */
    const shakeButton = document.getElementById('shakeButton');
    let shakeDetected = false;
    let shakeMotionListener = null;
    let shakeTimeout = null;
    const shakeThreshold = 3; // m/s² deviation from 9.8
    const shakeListeningTime = 10000; // 10 seconds

    function handleShakeMotion(event) {
      const acc = event.accelerationIncludingGravity;
      if (!acc) return;
      const x = acc.x || 0;
      const y = acc.y || 0;
      const z = acc.z || 0;
      const magnitude = Math.sqrt(x * x + y * y + z * z);
      if (Math.abs(magnitude - 9.8) > shakeThreshold) {
        if (!shakeDetected) {
          shakeDetected = true;
          if (shakeTimeout) clearTimeout(shakeTimeout);
          stopShakeList
